import{w as y,x as $,a as o,c as M,cw as U,W as j,d2 as D,ah as F,d3 as I,d4 as O,cP as W,ap as L,d5 as N,c8 as R,d1 as T,d6 as V,c_ as q,a5 as z}from"./sanity.config-BAzybkZL.js";function A(s){return y(function(e,t){var r=!1,i=0;e.subscribe($(t,function(a){return(r||(r=!s(a,i++)))&&t.next(a)}))})}const B=s=>{const e=M.c(16),{comlink:t,refs:r,perspective:i}=s,a=U(),c=j();let p;e[0]===Symbol.for("react.memo_cache_sentinel")?(p=new D,e[0]=p):p=e[0];const w=p;let u;e[1]!==a||e[2]!==i||e[3]!==c?(u=w.asObservable().pipe(F(g=>O(g.map(n=>{const S={...n,_id:W(n._id)},x=i==="published"?L:a.observeForPreview(S,c.get(S._type)).pipe(N(),A(C)),E={...n,_id:R(n._id)},k=a.observeForPreview(E,c.get(E._type));return T(k.pipe(V(x)),x).pipe(q(G),z(H))}))),I(0)),e[1]=a,e[2]=i,e[3]=c,e[4]=u):u=e[4];const l=u;let d;e[5]===Symbol.for("react.memo_cache_sentinel")?(d=[],e[5]=d):d=e[5];const P=o.useRef(d);let m,b;e[6]!==t||e[7]!==l?(m=()=>{const g=l.subscribe(n=>{t.post("presentation/preview-snapshots",{snapshots:n}),P.current=n});return()=>{g.unsubscribe()}},b=[t,l],e[6]=t,e[7]=l,e[8]=m,e[9]=b):(m=e[8],b=e[9]),o.useEffect(m,b);let f,h;e[10]!==t?(f=()=>t.on("visual-editing/preview-snapshots",()=>({snapshots:P.current})),h=[t],e[10]=t,e[11]=f,e[12]=h):(f=e[11],h=e[12]),o.useEffect(f,h);let v,_;return e[13]!==r?(v=()=>{w.next(r)},_=[r,w],e[13]=r,e[14]=v,e[15]=_):(v=e[14],_=e[15]),o.useEffect(v,_),null};var K=o.memo(B);function C(s){return s.snapshot===null}function G(s){return!!s.snapshot}function H(s){const e=s.snapshot;return{_id:R(e._id),title:e.title,subtitle:e.subtitle,description:e.description,imageUrl:e.imageUrl}}export{K as default};
